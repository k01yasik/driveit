(self.webpackChunk=self.webpackChunk||[]).push([[773],{527:()=>{var e,a=$(".add-comment-wrapper");$(".add-comment-button").click((function(){var t=$(".text-editor-body"),n=a.data("post"),o=a.data("level"),s=a.data("parent"),r=t.html(),c=new FormData;c.append("post",n),c.append("level",o),c.append("parent",s),c.append("message",r),$.ajax({method:"POST",url:"/comment/store",contentType:!1,processData:!1,dataType:"json",data:c,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(a){localStorage.removeItem("post-body"),t.html("<div><br /></div>");var n="<div class='comment-item level-"+a.level+"' data-level='"+a.level+"'><div class='header'><a href='"+a.url+"' class='user-avatar-link header-item'><img src='"+a.avatar+"' class='user-avatar' alt='"+a.username+"' /></a><a href='"+a.url+"' class='post-author header-item'>"+a.username+"</a><div class='right'>"+a.created_at+"</div></div><div class='body'><p>"+a.message+"</p></div></div>";e?(e.after(n),e=void 0):$(".comments-wrapper").append(n)}))})),$(".reply-button").click((function(){var t=$(this),n=t.data("level");n+=1;var o=t.data("parent");a.data("level",n),a.data("parent",o),$("html, body").animate({scrollTop:$("#add-comment").offset().top},2e3);var s=$(this).parents(".comment-item"),r=s.data("level");for(r+=1;s.next().data("level")>=r;)s=s.next();e=s}))},6027:()=>{var e=$("#upload_image_to_album_input");$(".add-image-button").click((function(){e.click()})),e.change((function(){$(".image-progress").fadeIn(500);for(var a=e.prop("files"),t=e.data("name"),n=e.data("username"),o=new FormData,s=0;s<a.length;s++)o.append("images_upload[]",a[s]);o.append("album_name",t),o.append("username",n),$.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var a=e.loaded/e.total*100,t=Math.round(a);$(".image-progress").prop("value",t)}}),!1),e},method:"POST",url:"/user/albums/image/upload",contentType:!1,processData:!1,dataType:"json",data:o,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(e){$(".no-images").hide();var a=$(".image-progress");a.fadeOut(100),a.prop("value",0),e.forEach((function(e){var a=$(".image-wrapper");"none"===a.css("display")&&a.css("display","flex"),a.prepend('<div class="image-block"><div class="image-block-top"><div class="image-block-top-button" data-id="'+e[2]+'" data-username="'+e[3]+'" data-album="'+e[4]+'"><svg version="1.1" class="image-block-button-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 94.926 94.926" style="enable-background:new 0 0 94.926 94.926;"xml:space="preserve"><g><path d="M55.931,47.463L94.306,9.09c0.826-0.827,0.826-2.167,0-2.994L88.833,0.62C88.436,0.224,87.896,0,87.335,0c-0.562,0-1.101,0.224-1.498,0.62L47.463,38.994L9.089,0.62c-0.795-0.795-2.202-0.794-2.995,0L0.622,6.096c-0.827,0.827-0.827,2.167,0,2.994l38.374,38.373L0.622,85.836c-0.827,0.827-0.827,2.167,0,2.994l5.473,5.476c0.397,0.396,0.936,0.62,1.498,0.62s1.1-0.224,1.497-0.62l38.374-38.374l38.374,38.374c0.397,0.396,0.937,0.62,1.498,0.62s1.101-0.224,1.498-0.62l5.473-5.476c0.826-0.827,0.826-2.167,0-2.994L55.931,47.463z"></path></g></svg></div></div><img src="'+e[1]+'" /><div class="image-block-footer"><div class="image-block-footer-counter">0</div><div class="image-block-footer-wrapper"><div class="image-block-footer-button" data-id="'+e[2]+'" data-username="'+e[3]+'"><svg version="1.1" class="heart-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 510 510" style="enable-background:new 0 0 510 510;" xml:space="preserve"><g><path d="M255,489.6l-35.7-35.7C86.7,336.6,0,257.55,0,160.65C0,81.6,61.2,20.4,140.25,20.4c43.35,0,86.7,20.4,114.75,53.55 C283.05,40.8,326.4,20.4,369.75,20.4C448.8,20.4,510,81.6,510,160.65c0,96.9-86.7,175.95-219.3,293.25L255,489.6z"></path></g></svg></div></div></div></div>')}))}))}))},220:(e,a,t)=>{"use strict";t(2210);t(933),t(3788),t(1451),t(5126),t(4884),t(594),t(527),t(7589),t(6027),t(7447),t(3423),t(6476),t(2614),t(7812),t(4733),t(7405),t(390),t(3033),t(4946),t(8359),t(5494),t(9883),t(1249),t(2697)},7405:()=>{var e=$(".back-to-top");$(window).scroll((function(){var a=document.body.scrollTop,t=document.documentElement.scrollTop;(a>t?a:t)>500?"0"===e.css("opacity")&&(e.css("opacity",1),e.css("z-index",1e3)):"1"===e.css("opacity")&&(e.css("opacity",0),e.css("z-index",-100))})),e.click((function(){$("html, body").animate({scrollTop:0},$(window).scrollTop()/2+2e3)}))},933:(e,a,t)=>{"use strict";t.r(a);var n=t(4554),o=(t(3328),t(1449),t(3861));t(8514),t(204),t(8922);window._=t(6486);try{window.$=window.jQuery=t(9755)}catch(e){}window.axios=t(9669),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.axios.defaults.withCredentials=!0;var s=document.head.querySelector('meta[name="csrf-token"]');s?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=s.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token"),(0,o.ZP)(".tippy",{theme:"material",arrow:o.ki,duration:500,placement:"right"}),window.io=t(6809),window.smartcrop=t(9697),window.Echo=new n.Z({broadcaster:"socket.io",host:window.location.hostname})},2614:()=>{$().ready((function(){var e=$(".channel").data("id"),a=$(".full-post").data("id");e&&window.Echo.private("user.".concat(e)).listen("MessageSaved",(function(e){var a=$(".profile-block-content");if(a.data("friend")===e.userFrom.id)a.append('<div class="message-wrapper"><div class="message-header"><a href="'+e.url+'" class="message-header-link"><img src="'+e.userFrom.profile.avatar+'" class="message-header-avatar"></a></div><div class="message-body"><div class="message-body-header"><a href="'+e.url+'" class="message-header-name">'+e.userFrom.username+'</a><div class="message-body-header-time">'+e.createdAt+'</div></div><div class="message-body-content">'+e.text+"</div></div></div>");else{var t=$(".messages-count"),n=parseInt(t.html());n+=1,t.html("+"+n),"none"===t.css("display")&&t.fadeIn(500)}})).listen("FriendRequest",(function(e){var a=$(".friend-requests"),t=a.html();t=parseInt(t),t++,a.html("+"+t),"none"===a.css("display")&&a.fadeIn(500),$(".users-element-request:last").after('<li class="users-element-request"><a href="'+e.urlSender+'" class="profile-link"><img src="'+e.avatar+'" class="avatar-image"></a><a href="'+e.urlSender+'" class="profile-name">'+e.sender.username+'</a><div class="friend-request-button right" data-id="'+e.sender.id+'" data-username="'+e.friend.username+'"><svg version="1.1" class="public-user-uncheck" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 15.381 15.381" style="enable-background:new 0 0 15.381 15.381;" xml:space="preserve"><g><path d="M12.016,15.381h-8.65c-1.558,0-2.826-1.268-2.826-2.825v-9.73C0.54,1.268,1.808,0,3.366,0h8.65c1.558,0,2.825,1.268,2.825,2.826v9.73C14.841,14.114,13.574,15.381,12.016,15.381z M3.366,1.305c-0.839,0-1.521,0.683-1.521,1.521v9.73c0,0.838,0.683,1.521,1.521,1.521h8.65c0.839,0,1.521-0.684,1.521-1.521v-9.73c0-0.839-0.683-1.521-1.521-1.521C12.016,1.305,3.366,1.305,3.366,1.305z"></path></g></svg></div></li>')})).listen("ConfirmFriendRequest",(function(e){var a=e.sender.id;$(".friend-id-"+a).children().last().replaceWith('<div class="confirmed right"><svg version="1.1" class="checked-friend-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 26 26"><path d="m.3,14c-0.2-0.2-0.3-0.5-0.3-0.7s0.1-0.5 0.3-0.7l1.4-1.4c0.4-0.4 1-0.4 1.4,0l.1,.1 5.5,5.9c0.2,0.2 0.5,0.2 0.7,0l13.4-13.9h0.1v-8.88178e-16c0.4-0.4 1-0.4 1.4,0l1.4,1.4c0.4,0.4 0.4,1 0,1.4l0,0-16,16.6c-0.2,0.2-0.4,0.3-0.7,0.3-0.3,0-0.5-0.1-0.7-0.3l-7.8-8.4-.2-.3z"></path></svg></div>')})),a&&(console.log("Post_id is present"),console.log("post.".concat(a)),window.Echo.join("post.".concat(a)).joining((function(e){$(".article-readers-body").append('<div class="post-reader flex flex-v-center" id="user-'+e.id+'"><a href="'+e.url+'" class="user-avatar-link"><img src="'+e.avatar+'" class="user-avatar" alt="'+e.username+'"></a><a href="'+e.url+'" class="post-author">'+e.username+"</a></div>")})).here((function(e){var a=$(".article-readers-body");0===a.children().length&&e.forEach((function(e){a.append('<div class="post-reader flex flex-v-center" id="user-'+e.id+'"><a href="'+e.url+'" class="user-avatar-link"><img src="'+e.avatar+'" class="user-avatar circle" alt="'+e.username+'"></a><a href="'+e.url+'" class="post-author">'+e.username+"</a></div>")}))})).leaving((function(e){var a="#user-"+e.id;$(a).remove()})))}))},1249:()=>{$(".expanded-item").click((function(){var e=$(this);e.next().toggle(200,(function(){e.children(".caret-down").toggleClass("rotate-svg")}))}))},7812:()=>{$(".request-list").on("click",".friend-request-button",(function(){var e=$(this),a=e.data("id"),t=e.data("username"),n=new FormData;n.append("id",a),n.append("username",t),$.ajax({method:"POST",url:"/user/friends/requests",contentType:!1,processData:!1,dataType:"text",data:n,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(a){e.html('<svg version="1.1" class="public-user-check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 26 26"><path d="m.3,14c-0.2-0.2-0.3-0.5-0.3-0.7s0.1-0.5 0.3-0.7l1.4-1.4c0.4-0.4 1-0.4 1.4,0l.1,.1 5.5,5.9c0.2,0.2 0.5,0.2 0.7,0l13.4-13.9h0.1v-8.88178e-16c0.4-0.4 1-0.4 1.4,0l1.4,1.4c0.4,0.4 0.4,1 0,1.4l0,0-16,16.6c-0.2,0.2-0.4,0.3-0.7,0.3-0.3,0-0.5-0.1-0.7-0.3l-7.8-8.4-.2-.3z"></path></svg>');var t=$(".friend-requests"),n=t.html();n=parseInt(n),n-=1;var o=e.parent();n>0?(o.fadeOut(500,(function(){o.remove()})),t.html("+"+n)):(t.fadeOut(500),o.fadeOut(500,(function(){$(".request-list-element").fadeIn(500)})))}))}))},1451:()=>{var e=$(".text-editor-body"),a=$(".select-item-sub"),t=$(".image-select-item-sub"),n=$(".select-item-input"),o=$(".image-select-item-input"),s=$(".image-item"),r=$("#upload_image_form_input"),c=localStorage.getItem("post-body");"undefined"!==c&&null!==c&&e.html(c),"undefined"!==e&&setInterval((function(){localStorage.setItem("post-body",e.html())}),1e4);var i=$("#body").val();""!==i&&e.html(i);var l=function(){if(null!=savedRange)if(window.getSelection){var e=window.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(savedRange)}else document.createRange?window.getSelection().addRange(savedRange):document.selection&&savedRange.select()};$(".link-item").mouseenter((function(){a.show()})).mouseleave((function(){a.hide()})),s.mouseenter((function(){t.show()})).mouseleave((function(){t.hide()})),$(".delete-item").click((function(){n.val("")})),$(".image-delete-item").click((function(e){e.stopImmediatePropagation(),o.val("")})),t.click((function(e){e.stopImmediatePropagation()})),$(".heading_2").click((function(){e.focus(),l(),document.execCommand("formatBlock",!1,"h2")})),$(".heading_3").click((function(){e.focus(),l(),document.execCommand("formatBlock",!1,"h3")})),$(".paragraph").click((function(){e.focus(),l(),document.execCommand("formatBlock",!1,"p")})),$(".bold-item").click((function(){e.focus(),l(),document.execCommand("bold",!1,null)})),$(".italic-item").click((function(){e.focus(),l(),document.execCommand("italic",!1,null)})),$(".checked-item").click((function(){var t=n.val();n.val(""),a.hide(),e.focus(),l(),document.execCommand("createLink",!1,t)})),$(".image-checked-item").click((function(e){e.stopImmediatePropagation();var a=o.val();if(o.val(""),a){var n=$(".text-editor-body img");0!==n.length&&(n.last().attr("alt",a),t.hide())}})),$(".broken-item").click((function(){e.focus(),l(),document.execCommand("unlink",!1,null)})),$(".ordered-item").click((function(){e.focus(),l(),document.execCommand("insertOrderedList",!1,null)})),$(".unordered-item").click((function(){e.focus(),l(),document.execCommand("insertUnorderedList",!1,null)})),$(".quotes-item").click((function(){e.focus(),l(),document.execCommand("formatBlock",!1,"BLOCKQUOTE")})),$(".indent-item").click((function(){e.focus(),l(),document.execCommand("indent",!1,null)})),$(".outdent-item").click((function(){e.focus(),l(),document.execCommand("outdent",!1,null)})),$(".undo-item").click((function(){e.focus(),l(),document.execCommand("undo",!1,null)})),$(".redo-item").click((function(){e.focus(),l(),document.execCommand("redo",!1,null)})),s.click((function(){r.click()})),r.change((function(){var a=r[0].files[0],t=new FormData;t.append("upload_image_form_input",a);var n=r.data("type");"post"!==n&&"comment"!==n||t.append("type",n);var o=$(".add-comment-wrapper").data("username");o&&t.append("username",o),a&&$.ajax({method:"POST",url:"/user/image/upload",contentType:!1,processData:!1,dataType:"text",data:t,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(a){e.focus(),l(),document.execCommand("insertImage",!1,a)}))})),e.focusout((function(){window.getSelection?savedRange=window.getSelection().getRangeAt(0):document.selection&&(savedRange=document.selection.createRange())})),$(".submit-post-form").click((function(){$("#body").val(e.html()),localStorage.removeItem("post-body"),localStorage.removeItem("title-post-image-url"),$("#create-post-form").submit()})),$(".submit-edit-post-form").click((function(){$("#body").val(e.html()),$("#caption").val("<p>"+$(".text-editor-body").children().first().html()+"</p>"),localStorage.removeItem("post-body"),localStorage.removeItem("title-post-image-url"),$("#create-post-form").submit()}))},7447:()=>{$(".image-wrapper").on("click",".image-block-footer-button",(function(){var e=$(this),a=e.data("id"),t=e.data("username"),n=new FormData;n.append("id",a),n.append("username",t),$.ajax({method:"POST",url:"/user/favorite/add",contentType:!1,processData:!1,dataType:"text",data:n,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(a){e.parent().prev().html(a)}))}))},9883:()=>{$(".alert").fadeOut(5e3)},5494:()=>{$(".image-block").click((function(){var e=$("img",this).data("url");$("main").append("<div class='fullpage-block'><img class='fullpage-image' src='"+e+"' /><div class='fullpage-messges'></div></div>")}))},3423:()=>{$(".image-block-top-button").click((function(){var e=$(this),a=e.data("id"),t=e.data("username"),n=e.data("album"),o=e.data("path"),s=e.data("thumbnail");$.ajax({method:"DELETE",url:"/user/image/delete?"+$.param({id:a,username:t,album:n,path:o,thumbnail:s}),contentType:!1,processData:!1,dataType:"text",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(a){"ok"===a&&e.parent().parent().remove()}))}))},8359:()=>{if("undefined"!=typeof posts){var e=$("#postChart"),a=$("#commentsChart"),t=$("#usersChart"),n=$("#countryChart"),o=$("#cityChart"),s=[],r=[];posts.forEach((function(e){switch(e.month){case 1:e.month="Январь";break;case 2:e.month="Февраль";break;case 3:e.month="Март";break;case 4:e.month="Апрель";break;case 5:e.month="Май";break;case 6:e.month="Июнь";break;case 7:e.month="Июль";break;case 8:e.month="Август";break;case 9:e.month="Сентябрь";break;case 10:e.month="Октябрь";break;case 11:e.month="Ноябрь";break;case 12:e.month="Декабрь"}})),posts.forEach((function(e){s.push(e.month+" "+e.year),r.push(e.count)})),r.forEach((function(e){e}));new Chart(e,{type:"bar",data:{labels:s,datasets:[{label:"Количество опубликованных статей",data:r,backgroundColor:"#573EA4",datalabels:{color:"#FFFFFF"}}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),commentsVerified,commentsNotVerified,new Chart(a,{type:"doughnut",data:{labels:["Одобренные комментарии","Неодобренные комментарии"],datasets:[{data:[commentsVerified,commentsNotVerified],backgroundColor:["#573EA4","#EF4747"],datalabels:{color:"#FFFFFF"}}]}}),new Chart(t,{type:"line",data:{labels:datesQuery,datasets:[{label:"Количество пользователей",data:usersQuery,backgroundColor:"#573EA4",borderColor:"#573EA4",fill:"origin",datalabels:{display:!1}},{label:"Количество сессий",data:sessionQuery,backgroundColor:"#EF4747",borderColor:"#EF4747",fill:"origin",datalabels:{display:!1}},{label:"Количество взаимодействий",data:hitsQuery,backgroundColor:"#BF3985",borderColor:"#BF3985",fill:"origin",datalabels:{display:!1}}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),new Chart(n,{type:"doughnut",data:{labels:countryQueryLabels,datasets:[{data:countryQueryData,backgroundColor:["#EF4747","#EFD247","#573EA4","#39BF39","#EF9347","#EFEF47","#7A369F","#2B8F8F","#EFB747","#ABDF43","#BF3985","#3C5AA0"],datalabels:{color:"#FFFFFF"}}]}}),new Chart(o,{type:"doughnut",data:{labels:cityQueryLabels,datasets:[{data:cityQueryData,backgroundColor:["#EF4747","#EFD247","#573EA4","#39BF39","#EF9347","#EFEF47","#7A369F","#2B8F8F","#EFB747","#ABDF43"],datalabels:{color:"#FFFFFF"}}]}})}},3788:()=>{var e=localStorage.getItem("title-post-image-url");if(e){var a="<img src="+e+" class='uploaded-image' />";$(".block-wrapper").after(a),$("#image").val(e)}$(".post_upload_image_button").click((function(){$("#post_upload_image_input").click()})),$("#post_upload_image_input").change((function(){var e=$("#image").val(),a=localStorage.getItem("title-post-image-path");if(""!==e)$.ajax({method:"DELETE",url:"/admin/posts/image-destroy?"+$.param({url:e,path:a}),contentType:!1,processData:!1,dataType:"text",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(){var e=$("#post_upload_image_input")[0].files[0],a=new FormData;a.append("post_upload",e),e&&$.ajax({method:"POST",url:"/admin/posts/image-upload",contentType:!1,processData:!1,dataType:"text",data:a,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(e){$(".uploaded-image").remove();var a="<img src="+e+" class='uploaded-image' />";$(".block-wrapper").after(a),$("#image").val(e),localStorage.setItem("title-post-image-url",e.url),localStorage.setItem("title-post-image-path",e.path)}))}));else{var t=$("#post_upload_image_input")[0].files[0],n=new FormData;n.append("post_upload",t),t&&$.ajax({method:"POST",url:"/admin/posts/image-upload",contentType:!1,processData:!1,dataType:"text",data:n,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(e){var a="<img src="+e+" class='uploaded-image' />";$(".block-wrapper").after(a),$("#image").val(e),localStorage.setItem("title-post-image-url",e)}))}}))},7589:()=>{$(".comment-publish-button").click((function(){var e=$(this),a="id="+e.data("id");$.ajax({method:"PUT",url:"/admin/comments/publish",data:a,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(){e.children().hasClass("comment-unpublish-svg")?e.html("<svg version='1.1' class='comment-publish-svg' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 26 26' xmlns:xlink='http://www.w3.org/1999/xlink' enable-background='new 0 0 26 26'><path d='m.3,14c-0.2-0.2-0.3-0.5-0.3-0.7s0.1-0.5 0.3-0.7l1.4-1.4c0.4-0.4 1-0.4 1.4,0l.1,.1 5.5,5.9c0.2,0.2 0.5,0.2 0.7,0l13.4-13.9h0.1v-8.88178e-16c0.4-0.4 1-0.4 1.4,0l1.4,1.4c0.4,0.4 0.4,1 0,1.4l0,0-16,16.6c-0.2,0.2-0.4,0.3-0.7,0.3-0.3,0-0.5-0.1-0.7-0.3l-7.8-8.4-.2-.3z'></path></svg>"):e.html("<svg version='1.1' class='comment-unpublish-svg' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 15.381 15.381' style='enable-background:new 0 0 15.381 15.381;' xml:space='preserve'><g><g><path d='M12.016,15.381h-8.65c-1.558,0-2.826-1.268-2.826-2.825v-9.73C0.54,1.268,1.808,0,3.366,0h8.65 c1.558,0,2.825,1.268,2.825,2.826v9.73C14.841,14.114,13.574,15.381,12.016,15.381z M3.366,1.305 c-0.839,0-1.521,0.683-1.521,1.521v9.73c0,0.838,0.683,1.521,1.521,1.521h8.65c0.839,0,1.521-0.684,1.521-1.521v-9.73 c0-0.839-0.683-1.521-1.521-1.521C12.016,1.305,3.366,1.305,3.366,1.305z'></path></g></g></svg>")}))}))},5126:()=>{$(".publish").click((function(e){var a="id="+e.currentTarget.dataset.id;$.ajax({method:"PUT",url:"/admin/posts/publish",data:a,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(){"unpublish-svg"===e.currentTarget.firstElementChild.className.baseVal?e.currentTarget.innerHTML="<svg version='1.1' class='publish-svg' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 26 26' xmlns:xlink='http://www.w3.org/1999/xlink' enable-background='new 0 0 26 26'><path d='m.3,14c-0.2-0.2-0.3-0.5-0.3-0.7s0.1-0.5 0.3-0.7l1.4-1.4c0.4-0.4 1-0.4 1.4,0l.1,.1 5.5,5.9c0.2,0.2 0.5,0.2 0.7,0l13.4-13.9h0.1v-8.88178e-16c0.4-0.4 1-0.4 1.4,0l1.4,1.4c0.4,0.4 0.4,1 0,1.4l0,0-16,16.6c-0.2,0.2-0.4,0.3-0.7,0.3-0.3,0-0.5-0.1-0.7-0.3l-7.8-8.4-.2-.3z'></path></svg>":e.currentTarget.innerHTML="<svg version='1.1' class='unpublish-svg' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 15.381 15.381' style='enable-background:new 0 0 15.381 15.381;' xml:space='preserve'><g><g><path d='M12.016,15.381h-8.65c-1.558,0-2.826-1.268-2.826-2.825v-9.73C0.54,1.268,1.808,0,3.366,0h8.65 c1.558,0,2.825,1.268,2.825,2.826v9.73C14.841,14.114,13.574,15.381,12.016,15.381z M3.366,1.305 c-0.839,0-1.521,0.683-1.521,1.521v9.73c0,0.838,0.683,1.521,1.521,1.521h8.65c0.839,0,1.521-0.684,1.521-1.521v-9.73 c0-0.839-0.683-1.521-1.521-1.521C12.016,1.305,3.366,1.305,3.366,1.305z'></path></g></g></svg>"}))}))},594:()=>{$(".rating-block").click((function(e){var a=$(this).data("id"),t=$(this).children("p"),n=new FormData;n.append("id",a),$.ajax({method:"POST",url:"/rating/post",contentType:!1,processData:!1,dataType:"text",data:n,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(e){t.html(e)}))}))},4733:()=>{$(".text-editor-body").keydown((function(e){if(e.ctrlKey&&13===e.keyCode){var a=$(".profile-block-content"),t=a.data("username"),n=a.data("friend"),o=$(".text-editor-body"),s=o.html();o.html("<div><br /></div>"),localStorage.removeItem("post-body");var r=new FormData;r.append("username",t),r.append("friend_id",n),r.append("message",s),$.ajax({method:"POST",url:"/user/messages/store",contentType:!1,processData:!1,dataType:"json",data:r,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(e){var a=$(".welcome-chat");"block"===a.css("display")&&a.fadeOut(200);var t='<div class="message-wrapper"><div class="message-header"><a href="'+e.url+'" class="message-header-link"><img src="'+e.avatar+'" class="message-header-avatar circle"></a></div><div class="message-body"><div class="message-body-header"><a href="'+e.url+'" class="message-header-name">'+e.username+'</a><div class="message-body-header-time">'+e.time+'</div></div><div class="message-body-content">'+e.text+"</div></div></div>";$(".profile-block-content").append(t)}))}}))},6476:()=>{$(".request-friend").click((function(){var e=$(this),a=e.data("friend"),t=e.data("username"),n=new FormData;n.append("friend",a),n.append("username",t),$.ajax({method:"POST",url:"/user/friends/add",contentType:!1,processData:!1,dataType:"text",data:n,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(a){e.replaceWith('<div class="waiting" title="Ожидание подтверждения."><div class="svg-wrapper"><svg version="1.1" class="hourglass-friend-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve"><g><path d="M54,58h-3v-4h-5V43.778c0-2.7-1.342-5.208-3.589-6.706L31.803,30l10.608-7.072C44.658,21.43,46,18.922,46,16.222V6h5V2h3c0.552,0,1-0.447,1-1s-0.448-1-1-1h-3h-1H10H9H6C5.448,0,5,0.447,5,1s0.448,1,1,1h3v4h5v10.222c0,2.7,1.342,5.208,3.589,6.706L28.197,30l-10.608,7.072C15.342,38.57,14,41.078,14,43.778V54H9v4H6c-0.552,0-1,0.447-1,1s0.448,1,1,1h3h1h40h1h3c0.552,0,1-0.447,1-1S54.552,58,54,58z M18.698,21.264C17.009,20.137,16,18.252,16,16.222V6h28v10.222c0,2.03-1.009,3.915-2.698,5.042L30,28.798L18.698,21.264z M16,43.778c0-2.03,1.009-3.915,2.698-5.042L30,31.202l11.302,7.534C42.991,39.863,44,41.748,44,43.778V54H16V43.778z"></path></g></svg></div><div class="button-title">Ожидание</div></div>')}))}))},4884:()=>{var e=$(".small-nav"),a=$(".small-first-level");$(".menu-icon-svg").click((function(){e.css("display","none"),a.fadeIn(500)})),$(".small-delete-button").click((function(){a.css("display","none"),e.fadeIn(500)})),$(".small-deleted-item").click((function(){a.css("display","none"),e.fadeIn(500)}))},2697:()=>{$(".test-airlock").click((function(){axios.get("/api/user").then((function(e){console.log(e.data.slug)})).catch((function(e){console.log("Unauthorized")}))}))},390:()=>{$(".upload-button").click((function(){$("#change-avatar-input").click()})),$("#change-avatar-input").change((function(){var e=$("#change-avatar-input")[0].files[0];if(e){var a=new FormData;a.append("avatar_upload",e),a.append("username",$(this).data("username"));var t,n,o=new Image;o.src=URL.createObjectURL(e),o.onload=function(){t=o.height,n=o.width,console.log(n),console.log(t),URL.revokeObjectURL(o.src);var s=new Image(n,t);s.src=URL.createObjectURL(e),console.log(s.width),console.log(s.height),smartcrop.crop(s,{width:200,height:200}).then((function(e){a.append("x",e.topCrop.x),a.append("y",e.topCrop.y),a.append("height",e.topCrop.height),a.append("width",e.topCrop.width),URL.revokeObjectURL(s.src),$.ajax({method:"POST",url:"/user/avatar/upload",contentType:!1,processData:!1,dataType:"text",data:a,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(e){$(".avatar-inner img").attr("src",e)}))}))}}}))},3033:()=>{$(".confirm-delete-button").click((function(){var e=$(this).data("id"),a=$(this).data("message"),t=$(this).data("button"),n=new FormData;n.append("id",e),$.ajax({method:"POST",url:"/admin/rips",contentType:!1,processData:!1,dataType:"json",data:n,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(e){"ok"===e.status&&($(".main-content-wrapper .flex").hide(),$(".main-content-wrapper").append('<div class="flex flex-justify-space"><p class="lockout-message">'+a+'</p><a href="'+e.url+'" class="button confirm-button">'+t+"</a></div>"))}))}))},4946:()=>{$(".unban-user-button").click((function(){var e=$(this),a=e.data("id"),t=e.data("message");$.ajax({method:"DELETE",url:"/admin/rips?"+$.param({id:a}),contentType:!1,processData:!1,dataType:"text",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(a){"ok"===a&&(e.remove(),$(".user-info").append('<div class="button info-button right">'+t+"</div>"))}))}))},2687:()=>{},7020:()=>{}},e=>{"use strict";var a=a=>e(e.s=a);e.O(0,[170,898],(()=>(a(220),a(2687))));e.O()}]);